# 海龟汤数据导入工具

这个工具用于将HTML文件中的海龟汤题目数据导入到Spring Boot后端数据库中。

## 功能特性

- 🔐 自动登录获取JWT token
- 📄 解析HTML文件中的海龟汤数据
- 🚀 批量导入68个海龟汤题目
- 📊 实时显示导入进度和结果
- ⚡ 支持错误处理和重试机制

## 环境要求

- Python 3.7+
- Spring Boot后端服务运行在 `http://localhost:8080`
- 管理员账户已创建（默认：admin/123456）

## 安装依赖

```bash
pip install -r requirements.txt
```

## 使用方法

### 1. 确保后端服务运行

首先确保Spring Boot后端服务正在运行：

```bash
cd turtle-soup-backend
mvn spring-boot:run
```

### 2. 运行数据导入脚本

```bash
python import_soup_data.py
```

### 3. 查看导入结果

脚本会显示详细的导入进度和结果：

```
🐢 海龟汤数据导入工具
==================================================
✅ 登录成功，获取到token: eyJhbGciOiJIUzI1NiJ9...
✅ 成功解析 68 个海龟汤题目

📝 正在导入第 1/68 个题目...
✅ 成功创建题目 1: 火车隧道自杀

📝 正在导入第 2/68 个题目...
✅ 成功创建题目 2: 葬礼上的男子

...

🎉 数据导入完成!
✅ 成功导入: 68 个
❌ 导入失败: 0 个
📊 总计: 68 个

🎊 数据导入成功完成！
```

## 配置说明

可以在脚本中修改以下配置：

```python
# 在 main() 函数中修改这些参数
base_url = "http://localhost:8080"  # Spring Boot服务地址
username = "admin"  # 管理员用户名
password = "123456"  # 管理员密码
html_file = "turtle-soup-backend/src/main/resources/templates/soup_data.html"  # HTML文件路径
```

## 数据结构

导入的数据包含以下字段：

- **id**: 题目编号（1-68）
- **title**: 题目标题
- **question**: 海龟汤问题
- **answer**: 答案
- **difficulty**: 难度等级（1-5）
- **tags**: 标签（经典、悬疑、烧脑、搞笑等）

## 错误处理

脚本包含完善的错误处理机制：

- 🔍 自动检查HTML文件是否存在
- 🔐 验证登录状态和token有效性
- 📝 详细的错误信息输出
- ⏸️ 支持用户中断（Ctrl+C）
- 🔄 单个题目失败不影响其他题目导入

## 注意事项

1. **服务地址**: 确保Spring Boot服务运行在正确的地址和端口
2. **账户权限**: 确保使用有管理员权限的账户
3. **网络连接**: 确保能够访问后端API
4. **数据格式**: HTML文件必须符合预期的表格格式
5. **导入频率**: 脚本包含0.5秒延迟，避免请求过快

## 故障排除

### 登录失败
- 检查用户名和密码是否正确
- 确认后端服务正在运行
- 检查网络连接

### 解析失败
- 确认HTML文件路径正确
- 检查HTML文件格式是否符合要求
- 确认文件编码为UTF-8

### 导入失败
- 检查JWT token是否有效
- 确认API接口路径正确
- 查看后端日志获取详细错误信息

## 下一步

数据导入完成后，你可以：

1. 🎮 启动前端应用开始游戏
2. 🔧 测试AI交互功能
3. 📊 查看数据库中的数据
4. 🎯 开始海龟汤游戏体验

---

🐢 享受你的海龟汤游戏吧！ 