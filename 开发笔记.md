核心功能需求
1. 题库管理
支持存储大量有趣的海龟汤题目（题干、标准答案、提示、标签等）。
支持后台管理（增删改查题目）。
题目可按标签、难度、热度等筛选。
tagId = 1 代表“经典”
tagId = 2 代表“悬疑”
tagId = 3 代表“搞笑”
tagId = 4 代表“烧脑”
2. 用户系统
用户注册、登录、登出。
游客模式（可试玩部分题目）。
用户历史记录、通关统计、收藏题目等。
3. 游戏流程
用户选择题目后进入推理房间。
用户可自由提问，AI仅回答“是/不是/无关”。
AI自动判断用户提问是否合规（避免直接问答案）。
用户可随时请求AI给出提示，AI根据当前推理进度智能生成提示。
当用户推理接近标准答案时，AI自动判定通关并展示完整故事。
支持放弃/重玩/切换题目。
4. AI交互
集成SpringAI，支持自然语言理解与生成。
AI能理解用户问题，智能判断回答（是/不是/无关）。
AI能分析用户推理进度，适时给出提示。
AI能判断用户是否已接近答案，自动宣布通关。
5. 前端体验
题库浏览、筛选、搜索。
游戏房间聊天式交互界面。
进度提示、历史提问回顾。
通关动画/反馈。
响应式设计，适配PC和移动端。

核心功能
1. AI问答系统（最重要）
实现后端的AI问答接口
集成SpringAI或类似AI服务
实现"是/不是/无关"的回答逻辑
添加问题合规性检查（避免直接问答案）
2. 游戏房间功能
完善游戏页面的交互体验
实现游戏状态管理（进行中、已通关、放弃）
添加游戏进度保存和恢复
实现通关判定逻辑

每个谜题包含：
- 谜题描述（用户看到的）
- 完整故事背景（AI知道的，用户不知道）
- 关键信息点（AI回答问题的依据）
- 难度等级
- 提示词模板


ai问答业务流程梳理
1）用户进入游戏
用户选择一个题目（soup），点击“开始游戏”。
系统为该用户和题目创建一条game_session记录，记录开始时间、状态（进行中）、已用提示数等。

2）AI问答流程
用户在前端输入问题，点击发送。
前端通过API将问题、当前game_session的ID、题目ID等信息发送到后端。
后端收到请求后，进行如下处理：

a. 问题合规性校验
检查问题是否为“是/否/无关”类型（可用正则或简单NLP判断）。
检查问题长度、是否重复、是否试图直接问答案等。

b. 组装AI提示词（Prompt）
查询soup表，获取该题目的完整描述（description）、标准答案（answer）。
查询question_log表，获取当前会话的历史问答，拼接成对话上下文。
组装系统提示词（system prompt），如：
```
  你是海龟汤推理游戏的AI，只能根据题目背景和历史问答，回答“是/否/无关”。
  题目背景：{description}
  标准答案：{answer}
  历史问答：{历史问答列表}
  玩家问题：{当前问题}
  你的回答只能是“是/否/无关”，不要透露答案。
```

c. 调用Spring AI
使用Spring AI的API，将组装好的prompt和用户问题发送给大模型（如OpenAI GPT）。
获取AI的回复（是/否/无关）。

d. 记录问答
将本次问答（问题、AI答案、时间）写入question_log表。

e. 返回结果
返回AI的回答给前端。
前端展示在聊天窗口。


todo:
